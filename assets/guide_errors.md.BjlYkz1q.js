import{_ as s,o as i,c as e,a2 as a}from"./chunks/framework.e3wD3Uh-.js";const k=JSON.parse('{"title":"Error Codes","description":"","frontmatter":{},"headers":[],"relativePath":"guide/errors.md","filePath":"guide/errors.md"}'),d={name:"guide/errors.md"};function n(r,t,l,o,h,c){return i(),e("div",null,[...t[0]||(t[0]=[a(`<h1 id="error-codes" tabindex="-1">Error Codes <a class="header-anchor" href="#error-codes" aria-label="Permalink to &quot;Error Codes&quot;">​</a></h1><p>Every FLAP method that can fail accepts an optional <code>error</code> integer argument. Check it after each call to detect problems early.</p><div class="language-fortran vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">fortran</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cli</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">switch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;--output&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ...,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">error)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  print</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;(A,I0)&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;CLI definition error: &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, error</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  stop</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end if</span></span></code></pre></div><h2 id="code-table" tabindex="-1">Code table <a class="header-anchor" href="#code-table" aria-label="Permalink to &quot;Code table&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:right;">Code</th><th>Meaning</th><th>Typical cause</th></tr></thead><tbody><tr><td style="text-align:right;"><code>-2</code></td><td>Help printed</td><td><code>--help</code> / <code>-h</code> was passed — not a real error</td></tr><tr><td style="text-align:right;"><code>-1</code></td><td>Version printed</td><td><code>--version</code> / <code>-v</code> was passed — not a real error</td></tr><tr><td style="text-align:right;"><code>0</code></td><td>Success</td><td>No error</td></tr><tr><td style="text-align:right;"><code>1</code></td><td>Missing default for optional argument</td><td>Added <code>required=.false.</code> but omitted <code>def=</code></td></tr><tr><td style="text-align:right;"><code>2</code></td><td>Required argument cannot use <code>exclude</code></td><td><code>required=.true.</code> combined with <code>exclude=</code></td></tr><tr><td style="text-align:right;"><code>3</code></td><td>Positional argument cannot use <code>exclude</code></td><td><code>positional=.true.</code> combined with <code>exclude=</code></td></tr><tr><td style="text-align:right;"><code>4</code></td><td>Named argument has no switch</td><td>Non-positional <code>add</code> called without <code>switch=</code></td></tr><tr><td style="text-align:right;"><code>5</code></td><td>Positional argument has no position</td><td><code>positional=.true.</code> without <code>position=</code></td></tr><tr><td style="text-align:right;"><code>6</code></td><td>Positional argument must use <code>act=&#39;store&#39;</code></td><td>Incompatible action for a positional CLA</td></tr><tr><td style="text-align:right;"><code>7</code></td><td>Value not in <code>choices</code> list</td><td>User supplied a value outside the allowed set</td></tr><tr><td style="text-align:right;"><code>8</code></td><td>Required argument missing</td><td>A <code>required=.true.</code> argument was not passed</td></tr><tr><td style="text-align:right;"><code>9</code></td><td>Two mutually exclusive arguments both passed</td><td>Both sides of an <code>exclude=</code> pair were given</td></tr><tr><td style="text-align:right;"><code>10</code></td><td>Cast to <code>logical</code> failed</td><td>CLA value string cannot be parsed as logical</td></tr><tr><td style="text-align:right;"><code>11</code></td><td><code>choices</code> not allowed for logical type</td><td><code>choices=</code> used with a boolean argument</td></tr><tr><td style="text-align:right;"><code>12</code></td><td>Argument is not list-valued</td><td><code>get</code> used with an array on a scalar argument</td></tr><tr><td style="text-align:right;"><code>13</code></td><td>Insufficient list arguments</td><td><code>nargs=&#39;N&#39;</code> but fewer than N values were passed</td></tr><tr><td style="text-align:right;"><code>14</code></td><td>Missing value</td><td>A named argument was passed but no value followed</td></tr><tr><td style="text-align:right;"><code>15</code></td><td>Unknown switch</td><td>An unrecognised switch was passed on the command line</td></tr><tr><td style="text-align:right;"><code>16</code></td><td><code>envvar</code> not allowed for positional</td><td><code>envvar=</code> combined with <code>positional=.true.</code></td></tr><tr><td style="text-align:right;"><code>17</code></td><td><code>envvar</code> requires <code>act=&#39;store&#39;</code></td><td>Environment variable used with an incompatible action</td></tr><tr><td style="text-align:right;"><code>18</code></td><td><code>envvar</code> not allowed for list-valued</td><td><code>envvar=</code> combined with <code>nargs=</code></td></tr><tr><td style="text-align:right;"><code>19</code></td><td><code>act=&#39;store*&#39;</code> not allowed for positional</td><td>Incompatible combination</td></tr><tr><td style="text-align:right;"><code>20</code></td><td><code>act=&#39;store*&#39;</code> not allowed for list-valued</td><td>Incompatible combination</td></tr><tr><td style="text-align:right;"><code>21</code></td><td><code>act=&#39;store*&#39;</code> not allowed with <code>envvar</code></td><td>Incompatible combination</td></tr><tr><td style="text-align:right;"><code>22</code></td><td>Unknown action</td><td><code>act=</code> set to an unrecognised string</td></tr><tr><td style="text-align:right;"><code>23</code></td><td>Group (command) consistency broken</td><td>Internal group definition error</td></tr><tr><td style="text-align:right;"><code>24</code></td><td>Two mutually exclusive groups both passed</td><td>Both sides of <code>set_mutually_exclusive_groups</code> given</td></tr><tr><td style="text-align:right;"><code>25</code></td><td>CLA not found in CLI</td><td><code>get</code> or <code>is_passed</code> called for an undefined switch</td></tr><tr><td style="text-align:right;"><code>26</code></td><td>Group not found in CLI</td><td><code>get</code> or <code>run_command</code> called for an undefined group</td></tr><tr><td style="text-align:right;"><code>27</code></td><td>CLA selection failing</td><td>Internal retrieval error</td></tr><tr><td style="text-align:right;"><code>28</code></td><td>Insufficient arguments for CLI</td><td>Too few arguments on the command line</td></tr></tbody></table><h2 id="handling-status-codes" tabindex="-1">Handling status codes <a class="header-anchor" href="#handling-status-codes" aria-label="Permalink to &quot;Handling status codes&quot;">​</a></h2><p>Codes <code>-2</code> and <code>-1</code> indicate that FLAP printed help or version text respectively. Depending on your program structure you may want to handle these differently from true errors:</p><div class="language-fortran vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">fortran</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cli</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">error)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    ! normal execution</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    stop</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  ! help or version was printed — exit cleanly</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  case</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    write</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;(A,I0)&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Parse error: &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, error</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    stop</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end select</span></span></code></pre></div><h2 id="accessing-the-error-message" tabindex="-1">Accessing the error message <a class="header-anchor" href="#accessing-the-error-message" aria-label="Permalink to &quot;Accessing the error message&quot;">​</a></h2><p><code>command_line_interface</code> has a public <code>error_message</code> attribute that contains a human-readable description of the last error:</p><div class="language-fortran vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">fortran</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cli</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">error)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  write</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;(A)&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">trim</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cli</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">error_message)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  stop</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end if</span></span></code></pre></div>`,11)])])}const g=s(d,[["render",n]]);export{k as __pageData,g as default};
